"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[833],{7833:function(e,t,s){s.r(t),s.d(t,{default:function(){return Fe}});var n=s(1413),a=s(2791),i=s(8128),r=s(9439),o=s(7804),l=s(2622),c=s(711),u=s(2853),d=s(2995),x=s(9951),h=s(7537),f=s(6090),j=s(5786),p=s(6988),m=s(1082),g=s(3099),Z=s(914),b=s(6106),v=s(2266),w=s(5400),C=s(9998),k=s(6441),N=s(3433),P=s(7309),y=s(6865),S=s(183),I=s(6734),L=s(8159),_=s(5527),F=s(184),U="https://randomuser.me/api/?results=".concat(3,"&inc=name,gender,email,nat,picture&noinfo"),A=function(){var e=(0,a.useState)(!0),t=(0,r.Z)(e,2),s=t[0],i=t[1],o=(0,a.useState)(!1),l=(0,r.Z)(o,2),c=l[0],u=l[1],d=(0,a.useState)([]),x=(0,r.Z)(d,2),h=x[0],f=x[1],j=(0,a.useState)([]),p=(0,r.Z)(j,2),m=p[0],g=p[1];(0,a.useEffect)((function(){fetch(U).then((function(e){return e.json()})).then((function(e){var t=e.results.map((function(e,t){return(0,n.Z)((0,n.Z)({},e),{},{id:t})}));i(!1),f(t),g(t)}))}),[]);var Z=s||c?null:(0,F.jsx)("div",{style:{textAlign:"center",marginTop:12,height:32,lineHeight:"32px"},children:(0,F.jsx)(P.Z,{onClick:function(){u(!0),g(h.concat((0,N.Z)(new Array(3)).map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{loading:!0,name:{},picture:{}})})))),fetch(U).then((function(e){return e.json()})).then((function(e){var t=h.concat(e.results.map((function(e,t){return(0,n.Z)((0,n.Z)({},e),{},{id:h.length+t})})));f(t),g(t),u(!1),window.dispatchEvent(new Event("resize"))}))},children:"loading more"})});return(0,F.jsx)(y.ZP,{loading:s,itemLayout:"horizontal",loadMore:Z,dataSource:m,rowKey:function(e){return e.id},renderItem:function(e){var t;return(0,F.jsx)(y.ZP.Item,{children:(0,F.jsxs)(S.Z,{avatar:!0,title:!1,loading:e.loading,active:!0,children:[(0,F.jsx)(y.ZP.Item.Meta,{avatar:(0,F.jsx)(v.C,{src:e.picture.large}),title:null===(t=e.name)||void 0===t?void 0:t.last,description:"This is so beautiful"}),(0,F.jsx)(I.Z,{}),(0,F.jsx)(L.Z,{twoToneColor:"#eb2f96"}),(0,F.jsx)(_.Z,{twoToneColor:"#52c41a"})]})})}})},T="Post_post__QrPww",M=h.Z.Meta,D=function(e){var t=(0,k.a)("(min-width: 992px)"),s=(0,a.useState)(!1),n=(0,r.Z)(s,2),i=n[0],N=n[1],P=(0,a.useState)(!1),y=(0,r.Z)(P,2),S=y[0],I=y[1],L=f.Z.useNotification(),_=(0,r.Z)(L,2),U=_[0],D=_[1],E=function(t){e.increaseLikesCount(t),U.open({message:"".concat(e.userName," liked your post"),description:(0,F.jsx)(j.Z,{height:100,alt:"postImage",src:e.post.image}),icon:(0,F.jsx)(o.Z,{}),placement:"bottomRight",duration:2,maxCount:2})},O=[{key:"1",label:(0,F.jsx)(m.Z,{title:"Delete the post",description:"Are you sure to delete this post?",onConfirm:function(){e.deletePost(e.post.id),p.ZP.success("Post deleted")},okText:"Yes",cancelText:"No",children:(0,F.jsxs)(g.Z,{className:"text",children:[(0,F.jsx)(l.Z,{})," Delete"]})})}];return(0,F.jsx)(Z.Z,{xs:24,sm:24,md:12,lg:8,xl:6,xxl:6,children:(0,F.jsx)(h.Z,{title:(0,F.jsxs)(b.Z,{justify:"space-between",align:"middle",children:[(0,F.jsx)(Z.Z,{children:(0,F.jsxs)(g.Z,{className:"text",children:[(0,F.jsx)(v.C,{size:30,icon:(0,F.jsx)("img",{src:e.userAvatar,alt:"main-img"})}),e.userName]})}),(0,F.jsx)(Z.Z,{children:e.allowChange&&(0,F.jsx)(w.Z,{placement:"bottomRight",trigger:"click",menu:{items:O},onOpenChange:function(e){N(e)},open:i,children:(0,F.jsx)(c.Z,{className:"text"})})})]}),hoverable:!0,className:T,headStyle:{padding:10},cover:(0,F.jsx)(j.Z,{height:t?200:250,alt:"postImage",src:e.post.image}),actions:[(0,F.jsxs)("div",{onClick:function(){e.post.liked?e.decreaseLikesCount(e.post.id):E(e.post.id)},className:"text",children:[e.post.likesCount,D,e.post.liked?(0,F.jsx)(u.Z,{}):(0,F.jsx)(o.Z,{},"like")]}),(0,F.jsxs)("div",{children:[(0,F.jsx)(C.Z,{title:"Comments",closable:!0,open:S,onCancel:function(){I(!1)},footer:[],children:(0,F.jsx)(A,{})}),(0,F.jsx)(d.Z,{className:"text",onClick:function(){I(!0)}},"comment")]}),(0,F.jsx)("div",{children:(0,F.jsx)(x.Z,{className:"text"},"share")})],children:(0,F.jsx)(M,{title:(0,F.jsx)("div",{className:"text",children:e.post.message})})})})},E=a.memo(D),O=s(6859),R=s(7128),q=s(4664),G=s(1117),J=s(1635),z=s(1752),B=s(1429),Y=s(6842),H=s(7106),V=s(9286),K=s(5518),Q=function(e){var t="image/jpeg"===e.type||"image/png"===e.type;return t||p.ZP.error("You can only upload JPG/PNG file!"),t},W=function(e){var t=(0,a.useState)(!1),s=(0,r.Z)(t,2),n=s[0],i=s[1],o=function(){i(!1)},l=(0,a.useState)(!1),c=(0,r.Z)(l,2),u=c[0],d=c[1],x=(0,a.useState)(),h=(0,r.Z)(x,2),f=h[0],j=h[1],p=(0,Y.Z)("",{isEmpty:!0,minLenght:3}),m=(0,F.jsxs)("div",{children:[u?(0,F.jsx)(H.Z,{}):(0,F.jsx)(V.Z,{}),(0,F.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)("button",{className:"btn",onClick:function(){i(!0)},children:["Add post ",(0,F.jsx)(V.Z,{})]}),(0,F.jsx)(C.Z,{onCancel:o,title:"Add new post",open:n,footer:[(0,F.jsx)("button",{onClick:o,className:"btn",children:"Cancel"},1),(0,F.jsx)("button",{onClick:function(){i(!1),e.onSubmit(p.value,f)},disabled:!p.inputValid||!f,className:"btn",children:"Add post"},2)],children:(0,F.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[(0,F.jsxs)("div",{children:[(0,F.jsx)("input",{onBlur:p.onBlur,onChange:p.onChange,value:p.value,name:"postMessage",type:"text"}),p.isDirty&&p.error&&(0,F.jsx)("div",{style:{color:"red"},children:p.error})]}),(0,F.jsx)("div",{children:(0,F.jsx)(K.Z,{name:"postImage",listType:"picture-card",showUploadList:!1,beforeUpload:Q,onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&function(e,t){var s=new FileReader;s.addEventListener("load",(function(){return t(s.result)})),s.readAsDataURL(e)}(e.file.originFileObj,(function(e){d(!1),j(e)})):d(!0)},children:f?(0,F.jsx)("img",{src:f,alt:"avatar",style:{width:"100%"}}):m})})]})})]})},X=s(4165),$=s(5861),ee=s(2004),te=s(2351),se=function(e){var t=function(){var e=(0,$.Z)((0,X.Z)().mark((function e(t){var s,n,a;return(0,X.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.url){e.next=5;break}return e.next=4,new Promise((function(e){var s=new FileReader;s.readAsDataURL(t.originFileObj),s.onload=function(){return e(s.result)}}));case 4:s=e.sent;case 5:(n=new Image).src=s,null===(a=window.open(s))||void 0===a||a.document.write(n.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,F.jsx)(ee.Z,{rotate:!0,children:(0,F.jsx)(K.Z,{showUploadList:!1,beforeUpload:function(t){var s="image/jpeg"===t.type||"image/png"===t.type,n=t.size/1024/1024<5;return s?n?(e.savePhoto(t),p.ZP.success("Image update")):p.ZP.error("Image must smaller than 5MB!"):p.ZP.error("You can only upload JPG/PNG file!"),s&&n},onPreview:t,children:(0,F.jsxs)("button",{className:"btn",children:["Upload ",(0,F.jsx)(te.Z,{})]})})})},ne=s(2175),ae=function(e){return(0,F.jsxs)("div",{children:[(0,F.jsx)(b.Z,{justify:"center",children:(0,F.jsx)(v.C,{className:"avatar",icon:(0,F.jsx)("img",{src:e.profile.photos.large||O,alt:"main-img"})})}),(0,F.jsx)(b.Z,{justify:"center",children:e.allowChange?(0,F.jsx)(g.Z,{direction:"vertical",children:(0,F.jsx)(se,{savePhoto:e.savePhoto})}):(0,F.jsx)(ne.Z,{userId:e.profile.userId,followed:e.profile.followed})})]})},ie=s(9058),re=s(655),oe=s(8042),le=s(6908),ce=s(5763),ue=s(3657),de=s(4204),xe=s(9293),he=s(1753),fe=s(4406),je=function(e){var t=e.contacts,s=[{key:"1",label:(0,F.jsx)("a",{href:t.facebook,target:"_blank",rel:"noreferrer",children:(0,F.jsxs)("span",{className:"text",children:[(0,F.jsx)("b",{children:"Facebook"})," ",t.facebook]})}),icon:(0,F.jsx)(re.Z,{className:fe.Z.contactsIcon}),disabled:!t.facebook},{key:"2",label:(0,F.jsx)("a",{href:t.website,target:"_blank",rel:"noreferrer",children:(0,F.jsxs)("span",{className:"text",children:[(0,F.jsx)("b",{children:"Website"})," ",t.website]})}),icon:(0,F.jsx)(oe.Z,{className:fe.Z.contactsIcon}),disabled:!t.website},{key:"3",label:(0,F.jsx)("a",{href:t.twitter,target:"_blank",rel:"noreferrer",children:(0,F.jsxs)("span",{className:"text",children:[(0,F.jsx)("b",{children:"Twitter"})," ",t.twitter]})}),icon:(0,F.jsx)(le.Z,{className:fe.Z.contactsIcon}),disabled:!t.twitter},{key:"4",label:(0,F.jsx)("a",{href:t.instagram,target:"_blank",rel:"noreferrer",children:(0,F.jsxs)("span",{className:"text",children:[(0,F.jsx)("b",{children:"Instagram"})," ",t.instagram]})}),icon:(0,F.jsx)(ce.Z,{className:fe.Z.contactsIcon}),disabled:!t.instagram},{key:"5",label:(0,F.jsx)("a",{href:t.youtube,target:"_blank",rel:"noreferrer",children:(0,F.jsxs)("span",{className:"text",children:[(0,F.jsx)("b",{children:"Youtube"})," ",t.youtube]})}),icon:(0,F.jsx)(ue.Z,{className:fe.Z.contactsIcon}),disabled:!t.youtube},{key:"6",label:(0,F.jsx)("a",{href:t.github,target:"_blank",rel:"noreferrer",children:(0,F.jsxs)("span",{className:"text",children:[(0,F.jsx)("b",{children:"Github"})," ",t.github]})}),icon:(0,F.jsx)(de.Z,{className:fe.Z.contactsIcon}),disabled:!t.github},{key:"7",label:(0,F.jsx)("a",{className:"text",href:t.mainLink,target:"_blank",rel:"noreferrer",children:(0,F.jsxs)("span",{className:"text",children:[(0,F.jsx)("b",{children:"Main Link"})," ",t.mainLink]})}),icon:(0,F.jsx)(xe.Z,{className:fe.Z.contactsIcon}),disabled:!t.mainLink}].filter((function(e){return!e.disabled}));return(0,F.jsx)("div",{style:{cursor:"pointer"},children:(0,F.jsx)(w.Z,{menu:{items:s},trigger:["click"],children:(0,F.jsxs)("div",{children:["Contacts ",(0,F.jsx)(he.Z,{})]})})})},pe=function(e){return(0,F.jsxs)("div",{className:fe.Z.info,children:[(0,F.jsx)("div",{children:(0,F.jsx)("b",{children:e.profile.fullName})}),(0,F.jsx)("div",{children:e.profile.aboutMe}),e.profile.lookingForAJob?(0,F.jsxs)("div",{children:[(0,F.jsx)("div",{children:"Looking for a job"}),(0,F.jsx)("div",{children:e.profile.lookingForAJobDescription})]}):(0,F.jsx)("div",{children:"Don't looking for a job"}),Object.values(e.profile.contacts).some((function(e){return e}))&&(0,F.jsx)(je,{contacts:e.profile.contacts})]})},me=function(e){var t=(0,a.useState)(!1),s=(0,r.Z)(t,2),n=s[0],i=s[1],o=(0,a.useState)(e.status),l=(0,r.Z)(o,2),c=l[0],u=l[1];(0,a.useEffect)((function(){return u(e.status)}),[e.status]);return(0,F.jsxs)("div",{className:fe.Z.info,children:[(0,F.jsx)("div",{children:(0,F.jsx)("b",{children:"Status"})}),n?(0,F.jsx)("div",{children:(0,F.jsx)("input",{autoFocus:!0,onBlur:function(){i(!1),e.updateUserStatus(c)},onChange:function(e){u(e.currentTarget.value)},type:"text",defaultValue:c})}):(0,F.jsx)("div",{children:(0,F.jsx)("span",{onDoubleClick:function(){e.allowChange&&i(!0)},children:c||"------------"})})]})},ge=function(e){var t=function(t){e.saveProfileInfo(t)},s=function(t,s){e.addPost(t,s),p.ZP.success("Post added")};return(0,F.jsxs)(b.Z,{gutter:[16,16],justify:{xs:"start",md:"center"},children:[(0,F.jsx)(Z.Z,{span:8,children:(0,F.jsx)(B.Z,{className:fe.Z.statistic__item,title:"Followers",value:e.profile.followed?1:0})}),(0,F.jsx)(Z.Z,{span:8,children:(0,F.jsx)(B.Z,{className:fe.Z.statistic__item,title:"Follows",value:10})}),(0,F.jsx)(Z.Z,{span:8,children:(0,F.jsx)(B.Z,{className:fe.Z.statistic__item,title:"Now",suffix:e.allowChange?(0,F.jsx)(G.Z,{}):(0,F.jsx)(J.Z,{}),value:e.allowChange?"online":"offline"})}),(0,F.jsx)(Z.Z,{span:24,className:"AvatatMobile1",children:(0,F.jsxs)(b.Z,{justify:"center",children:[(0,F.jsx)(Z.Z,{span:24,children:(0,F.jsx)(ae,{allowChange:e.allowChange,profile:e.profile})}),(0,F.jsx)(ie.Z,{onSubmit:t,profile:e.profile,children:(0,F.jsxs)("button",{className:"btn",children:["Edit info ",(0,F.jsx)(z.Z,{})]})}),(0,F.jsx)(W,{onSubmit:s})]})}),(0,F.jsx)(Z.Z,{xs:24,sm:e.allowChange?8:12,md:e.allowChange?8:12,children:(0,F.jsx)(pe,{profile:e.profile})}),(0,F.jsx)(Z.Z,{xs:24,sm:e.allowChange?8:12,md:e.allowChange?8:12,children:(0,F.jsx)(b.Z,{justify:{sm:"start",md:"center"},children:(0,F.jsx)(me,{status:e.status,updateUserStatus:e.updateUserStatus,allowChange:e.allowChange})})}),e.allowChange&&(0,F.jsx)(Z.Z,{xs:24,sm:16,md:8,className:"AvatatMobile2",children:(0,F.jsxs)(b.Z,{justify:{xs:"space-around",sm:"start",md:"center"},children:[(0,F.jsx)(ie.Z,{onSubmit:t,profile:e.profile,children:(0,F.jsxs)("button",{className:"btn",children:["Edit info ",(0,F.jsx)(z.Z,{})]})}),(0,F.jsx)(W,{onSubmit:s})]})})]})},Ze=s(4771),be=function(e){var t=function(t){e.deletePost(t)},s=function(t){e.increaseLikesCount(t)},n=function(t){e.decreaseLikesCount(t)},a=e.posts.map((function(a){return(0,F.jsx)(E,{userAvatar:e.profile.photos.large||O,userName:e.profile.fullName,post:a,deletePost:t,decreaseLikesCount:n,increaseLikesCount:s,allowChange:e.allowChange},a.id)}));return(0,F.jsx)("div",{id:"scrollableDiv",style:{height:"80vh",overflow:"auto"},children:(0,F.jsx)(Ze.Z,{dataLength:e.posts.length,scrollableTarget:"scrollableDiv",children:(0,F.jsxs)("main",{className:fe.Z.main,children:[(0,F.jsxs)(b.Z,{gutter:[16,16],justify:"center",children:[(0,F.jsx)(Z.Z,{span:6,className:"AvatatMobile2",children:(0,F.jsx)(ae,{allowChange:e.allowChange,profile:e.profile})}),(0,F.jsx)(Z.Z,{xs:24,sm:18,children:(0,F.jsx)(ge,{status:e.status,updateUserStatus:e.updateUserStatus,allowChange:e.allowChange,profile:e.profile,savePhoto:e.savePhoto,saveProfileInfo:e.saveProfileInfo,addPost:e.addPost})})]}),(0,F.jsx)(R.Z,{className:"divider__text",style:{padding:"20px 0px"},plain:!0,children:"Posts"}),e.allowChange?(0,F.jsx)(F.Fragment,{children:a.length?(0,F.jsx)(b.Z,{className:"w100",gutter:[16,16],children:a}):(0,F.jsx)(q.Z,{})}):(0,F.jsx)(q.Z,{})]})})})},ve=s(8687),we=s(664),Ce=s(6871),ke=s(7781),Ne=function(e){return e.profilePage.posts},Pe=function(e){return e.profilePage.newPostMessage},ye=function(e){return e.profilePage.isFetching},Se=function(e){return e.profilePage.status},Ie=function(e){return e.profilePage.profile},Le=function(e){return e.auth.id},_e=s(4041),Fe=(0,ke.qC)((0,ve.$j)((function(e){return{posts:Ne(e),newPostMessage:Pe(e),isFetching:ye(e),isAuth:(0,_e.Od)(e),status:Se(e),profile:Ie(e),id:Le(e)}}),{addPost:i.q2,deletePost:i.fR,increaseLikesCount:i.dk,decreaseLikesCount:i.D8,requestProfile:i.tg,getUserStatus:i.Tq,updateUserStatus:i.OL,savePhoto:i.Ju,saveProfileInfo:i.FX}),(function(e){return function(t){var s=(0,Ce.TH)(),a=(0,Ce.s0)(),i=(0,Ce.UO)();return(0,F.jsx)(e,(0,n.Z)((0,n.Z)({},t),{},{router:{location:s,navigate:a,params:i}}))}}))((function(e){var t=e.router.params.userId,s=!1,i=e.requestProfile,r=e.getUserStatus;return t||(t=e.id,s=!0),(0,a.useEffect)((function(){i(t),r(t)}),[t,i,r]),(0,F.jsx)(F.Fragment,{children:e.isFetching?(0,F.jsx)(we.Z,{}):(0,F.jsx)(be,(0,n.Z)((0,n.Z)({},e),{},{allowChange:s}))})}))}}]);
//# sourceMappingURL=833.8cbcc0d9.chunk.js.map